{"version":3,"sources":["main.js","config/uRouter.js","controller/index.js","directive/uAfterRender.js","directive/uApp.js","filter/uHtml.js","service/uBaidu.js","service/uBrowser.js","service/uCreatejs.js","service/uQuery.js","service/uRequest.js","service/uValidate.js","service/uWebApi.js","service/uWeixin.js"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACdA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9FA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACxBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACtDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACVA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC9EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrJA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACrBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC/HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AC3BA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;ACvBA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"app.js","sourcesContent":["angular.module('ued', [\n    'ngRoute',\n    'ngCookies'\n])\n\nangular.element(document).ready(function () {\n    angular.bootstrap(document, ['ued'])\n})\n","var routes = [\n    'index'\n]\n\nangular.module('ued').config(function ($routeProvider) {\n    routes.forEach(function (name) {\n        $routeProvider.when('/' + name, {\n            controller: name,\n            controllerAs: name,\n            templateUrl: 'page/' + name + '/' + name + '.html'\n        })\n    })\n\n    $routeProvider.otherwise({\n        redirectTo: '/index'\n    })\n})\n","angular.module('ued').controller('index', function ($scope,uCreatejs) {\n    $scope.$on(\"$viewContentLoaded\", onViewContentLoaded);\n\n    // var bg = new buzz.sound(\"dist/default/page/index/music/music\", {\n    //     formats: [\"mp3\",\"ogg\"],\n    //     preload: true,\n    //     loop: true\n    // });\n    var isOpen = true;\n    \n    document.addEventListener(\"WeixinJSBridgeReady\", function () {\n        $(\"#music\")[0].play();\n    }, false);\n\n    // $(\"body\").one(\"touchstart\",function(){$(\"#music\")[0].play();});\n    $scope.playPause = function(){\n        $(\".btn_music\").toggleClass('music_off');\n        if(isOpen){\n            $(\"#music\")[0].pause();\n        }else{\n            $(\"#music\")[0].play();\n        }\n        isOpen = !isOpen\n    }\n    function  onViewContentLoaded()\n    {\n        uCreatejs.load({\n            selector: 'canvas', // 元素选择器或者元素对象\n            name: 'h5', // 导出的文件名\n            path: 'flash/h5', // 存放导出文件的目录\n            spritesheetLength: 12, // 导出的雪碧图数量,\n            spritesheetName: 'h5_atlas_', //导出的雪碧图名称\n            onProgress: function (value) {\n                // console.log('加载 ' + ~~(value * 100) + '%');\n            },\n            onComplete: function (obj) {\n                // console.log(obj) // 会回调stage, exportRoot等对象 用于后续操作\n                exportRoot = obj.exportRoot;\n                swipeH5(exportRoot);\n                // $('.btn_music,.arrow').fadeIn();\n                if(!isOpen){ \n                    $(\"#canvas\").one(\"touchstart\",function(){$(\"#music\")[0].play();});\n                }\n                \n            }\n        });\n    }\n    // window.showQrcode = function(){\n    //     $('.qrcode').fadeIn();\n    // }\n\n    function swipeH5(stage){\n        var childs = [\n            exportRoot.instance_12,\n            exportRoot.instance_11,\n            exportRoot.instance_10,\n            exportRoot.instance_9,\n            exportRoot.instance_8,\n            exportRoot.instance_7,\n            exportRoot.instance_6,\n            exportRoot.instance_5,\n            exportRoot.instance_4,\n            exportRoot.instance_3,\n            exportRoot.instance_2,\n            exportRoot.instance_1\n        ];\n\n        stage.addChild(childs[0]);\n        var verticalSwipe = new Swipe(document.getElementById('container'), {\n            continuous: false, // 是否循环滚动\n            stopPropagation: true,\n            callback:function(e){\n                stage.removeAllChildren();\n                setTimeout(function(){\n                    $('#canvas').appendTo($('#container ul li:eq('+e+')'));\n                    stage.addChild(childs[e]);\n                    childs[e].gotoAndPlay(0);\n                },500);\n                // if(e == 6){\n                //     $('.arrow').hide();\n                // }else{\n                //     $('.qrcode').hide();\n                //     $('.arrow').show();\n                // }\n            }\n        });\n    }\n})\n","/**\r\n * Created by user on 2016/9/21.\r\n */\r\nangular.module('ued').directive('uAfterRender',function ($timeout) {\r\n    return {\r\n        restrict: 'A',\r\n        link: function (scope, element, attrs) {\r\n            scope.$watch(function () {\r\n                scope.$eval(attrs.ngBindHtml)\r\n            }, function (value) {\r\n                $timeout(function () {\r\n                    scope.$eval(attrs.uAfterRender, {$element: element})\r\n                })\r\n            })\r\n        }\r\n    }\r\n}\r\n)\r\n","angular.module('ued').directive('uApp', function (uBaidu, uBrowser, uWeixin) {\n    return {\n        replace: true,\n        templateUrl: 'component/uApp/uApp.html',\n        link: function (scope, element, attrs) {\n            FastClick.attach(document.body)\n\n            scope.$on(\"$routeChangeStart\", onRouteChangeStart)\n\n            scope.$on(\"$viewContentLoaded\", onViewContentLoaded)\n\n            uBrowser.onOrientationChange(onOrientationChange)\n\n            // uWeixin.init().then(onWeixinInit)\n            \n            function onRouteChangeStart(event, next, current) {\n                if (next.$$route) {\n                    scope.ctrlName = next.$$route.controllerAs\n\n                    // uBaidu.trackPageView('/html/htamhb/' + window.location.hash)\n                }\n\n                $('body :not([ng-view],link,script)').remove()\n            }\n\n            function onViewContentLoaded() {\n                uBrowser.setTitle('珍藏最好时光 记录长期陪伴')\n            }\n\n            function onWeixinInit() {\n                uWeixin.share({\n                    title: '',\n                    desc: '',\n                    link: '',\n                    imgUrl: ''\n                })\n            }\n\n            function onOrientationChange(deg, isLandscape) {\n                // if (isLandscape) {\n                //     $('body').addClass('landscape')\n                // } else {\n                //     $('body').removeClass('landscape')\n                // }\n            }\n        }\n    }\n})\n","angular.module('ued').filter('uHtml', function ($sce) {\r\n    return function (source) {\r\n        return $sce.trustAsHtml(source)\r\n    }\r\n})","angular.module('ued').factory('uBaidu', function () {\n    var uBaidu = {}\n\n    /**\n     * 事件统计\n     * @param {String} message\n     * @param {String} [eventName='click']\n     */\n    uBaidu.trackEvent = function (message, eventName) {\n        if (window._hmt) {\n            _hmt.push(['_trackEvent', message, eventName || 'click', message])\n        }\n    }\n\n    /**\n     * 页面统计\n     * @param {String} uri\n     */\n    uBaidu.trackPageView = function (uri) {\n        if (window._hmt) {\n            _hmt.push(['_trackPageview', uri])\n        }\n    }\n\n    return uBaidu\n})","angular.module('ued').factory('uBrowser', function () {\n    var uBrowser = {}\n\n    /**\n     * 是否微信\n     * @returns {Boolean}\n     */\n    uBrowser.isWeixin = function () {\n        return /MicroMessenger/i.test(navigator.userAgent)\n    }\n\n    /**\n     * 是否安卓\n     * @returns {Boolean}\n     */\n    uBrowser.isAndroid = function () {\n        return /Android/i.test(navigator.userAgent)\n    }\n\n    /**\n     * 是否苹果\n     * @returns {boolean}\n     */\n    uBrowser.isIOS = function () {\n        return /iPhone|iPad|iPod/i.test(navigator.userAgent)\n    }\n\n    /**\n     * 是否移动设备\n     * @returns {boolean}\n     */\n    uBrowser.isMobile = function () {\n        return /Android|BlackBerry|iPhone|iPad|iPod|IEMobile/i.test(navigator.userAgent)\n    }\n\n    /**\n     * 监听设备旋转\n     * @param {Function} callback (旋转角度, 是否横屏)\n     */\n    uBrowser.onOrientationChange = function (callback) {\n        if (typeof callback === 'function') {\n            window.removeEventListener('orientationchange', orientationchange)\n            window.addEventListener('orientationchange', orientationchange)\n        }\n        \n        function orientationchange() {\n            var orientation = window.orientation\n            if (orientation) {\n                callback(orientation, Math.abs(orientation) === 90)\n            }\n        }\n    }\n\n    /**\n     * 设置标题(hack在微信等webview中无法修改document.title的情况)\n     * @param title\n     */\n    uBrowser.setTitle = function (title) {\n        document.title = title\n\n        if (uBrowser.isWeixin()) {\n            var $iframe = $('<iframe style=\"display: none;\" src=\"/favicon.ico\"></iframe>')\n                .on('load', function () {\n                    setTimeout(function () {\n                        $iframe.off('load').remove()\n                    }, 0)\n                })\n                .appendTo('body')\n        }\n    }\n\n    return uBrowser\n})","/**\n * 方便百分比加载flash导出的createjs文件\n *\n * @使用说明\n *\n *  新建目录 flash/demo/demo.fla\n *\n *  执行导出操作(无需修改任何导出的文件)\n *\n *  package.json gulpConfig.lib 中加入 \"vendor/createjs.js\" 依赖\n *\n *  页面控制器中调用:\n *\nuCreatejs.load({\n    selector: 'canvas', // 元素选择器或者元素对象\n    name: 'demo', // 导出的文件名\n    path: 'flash/demo', // 存放导出文件的目录\n    spritesheetLength: 4, // 导出的雪碧图数量,\n    spritesheetName: 'demo_atlas_', //导出的雪碧图名称\n    onProgress: function (value) {\n        console.log('加载 ' + ~~(value * 100) + '%')\n    },\n    onComplete: function (obj) {\n        console.log(obj) // 会回调stage, exportRoot等对象 用于后续操作\n    }\n})\n */\nangular.module('ued').factory('uCreatejs', function () {\n    function loadScript(url, cb) {\n        var script = document.createElement('script')\n        script.type = 'text/javascript'\n        script.onload = cb\n        script.src = url\n        document.querySelector('head').appendChild(script)\n    }\n\n    function initScript(options) {\n        var canvas, stage, exportRoot;\n\n        function init() {\n            canvas = $(options.selector)[0]\n            images = images || {};\n            ss = ss || {};\n\n            loadSpritesheetResource(function (array) {\n                lib.properties.manifest = lib.properties.manifest.map(function (obj) {\n                    obj.src = options.path + '/' + obj.src\n                    return obj\n                })\n\n                array = array.concat(lib.properties.manifest)\n\n                loadImages(array, options.onProgress, handleComplete)\n            })\n        }\n\n        function loadSpritesheetResource(cb) {\n            var array = []\n            var count = options.spritesheetLength\n\n            for (var i = 1; i <= options.spritesheetLength; i++) {\n                var id = options.spritesheetName + (i == 1 ? '' : i)\n                var src = options.path + \"/images/\" + id + \".json\";\n\n                (function (id, src) {\n                    loadSpritesheetJSON(src, function (json) {\n                        ss[id] = new createjs.SpriteSheet(json)\n                        json.images.forEach(function (src) {\n                            array.push({id: id, src: src, isSpritesheet: true})\n                        })\n\n                        if (--count == 0) {\n                            cb(array)\n                        }\n                    })\n                })(id, src)\n            }\n        }\n\n        function loadSpritesheetJSON(url, cb) {\n            $.getJSON(url, function (data) {\n                data.images = data.images.map(function (image) {\n                    image = options.path + '/' + image\n                    return image\n                })\n                cb(data)\n            })\n        }\n\n        function loadImages(array, progress, complete) {\n            var count = 0\n\n            array.forEach(function (item) {\n                loadImage(item.src, function (image) {\n                    if (!item.isSpritesheet) {\n                        images[item.id] = image\n                    }\n                    count++\n                    progress && progress(count / array.length)\n                    if (count == array.length) {\n                        complete()\n                    }\n                })\n            })\n        }\n\n        function loadImage(src, cb) {\n            var image = new Image()\n            image.onload = function () {\n                cb(image)\n            }\n            image.src = src\n        }\n\n        function handleComplete() {\n            exportRoot = new lib[options.name]();\n\n            stage = new createjs.Stage(canvas);\n            stage.addChild(exportRoot);\n            stage.update();\n\n            createjs.Ticker.setFPS(lib.properties.fps);\n            createjs.Ticker.addEventListener(\"tick\", stage);\n\n            options.onComplete && options.onComplete({\n                lib: lib,\n                ss: ss,\n                stage: stage,\n                exportRoot: exportRoot,\n                images: images\n            })\n        }\n\n        init()\n    }\n    \n    return {\n        load: function (options) {\n            loadScript(options.path + '/' + options.name + '.js', function () {\n                initScript(options)\n            })\n        }\n    }\n})","angular.module('ued').factory('uQuery', function (){\n    /*获取url参数*/\n    var uQuery = {};\n\n    uQuery.query = function(str) {\n    \tvar para = window.location.href.split(\"?\")[1];\n\t\tif(para && para.indexOf(str)!=-1){\n    \t\tvar r = para.match(new RegExp('(^|&)' + str + '=([^&]*)(&|$)', 'i'));\n            return unescape(r[2]);\n\t\t}\n\t    return \"\";\n\t}\n\n    return uQuery;\n});\n","angular.module('ued').factory('uRequest', function ($timeout) {\n    var uRequest = {}\n    var count = 0\n\n    /**\n     * 获取请求数量\n     * @returns {number}\n     */\n    uRequest.getCount = function () {\n        return count\n    }\n\n    /**\n     * 是否本地环境\n     * @returns {Boolean}\n     */\n    uRequest.isLocal = function () {\n        return /127\\.0\\.0\\.1|localhost|192\\./i.test(window.location.hostname)\n    }\n\n    /**\n     * 底层ajax请求\n     * @param {Object} options\n     * @returns {*}\n     */\n    uRequest.ajax = function (options) {\n        var def = $.Deferred()\n        count++\n\n        // 如果是本地环境,并且URL非http开始的路径,使用mock数据\n        if (uRequest.isLocal() && !/^http/i.test(options.url)) {\n            options.url = 'mock' + options.url + '.json'\n            options.type = 'GET'\n        } else {\n            // 非跨域请求 上CDN后 影响接口调用,拼上绝对路径\n            if (options.url.indexOf('http') === -1) {\n                options.url = window.location.origin + options.url\n            }\n        }\n\n        $.ajax(options).always(function () {\n            count--\n\n        }).then(function (res) {\n            $timeout(function () {\n                if (res.success) {\n                    def.resolve(res)\n                } else {\n                    def.reject(res)\n                }\n            })\n        }, function (err) {\n            $timeout(function () {\n                def.reject({\n                    success: false,\n                    errorMsg: '网络繁忙,请稍候重试!'\n                })\n            })\n        })\n\n        return def.promise()\n    }\n\n    /**\n     * GET请求\n     * @param {String} url\n     * @param {Object|String} [data]\n     * @returns {*}\n     */\n    uRequest.get = function (url, data) {\n        return uRequest.ajax({\n            type: 'GET',\n            url: url,\n            data: data,\n            dataType: 'json'\n        })\n    }\n\n    /**\n     * JSONP请求\n     * @param {String} url\n     * @param {Object|String} [data]\n     * @returns {*}\n     */\n    uRequest.jsonp = function (url, data) {\n        return uRequest.get(url + '?jsonpcallback=?', data)\n    }\n\n    /**\n     * POST请求\n     * @param {String} url\n     * @param {Object|String} [data]\n     * @returns {*}\n     */\n    uRequest.post = function (url, data) {\n        return uRequest.ajax({\n            type: 'POST',\n            url: url,\n            data: data,\n            dataType: 'json'\n        })\n    }\n\n    /**\n     * 带文件上传的ajax POST表单提交\n     * @param {String} url\n     * @param {FormData} data\n     * @returns {*}\n     */\n    uRequest.upload = function (url, data) {\n        return uRequest.ajax({\n            type: 'POST',\n            url: url,\n            data: data,\n            dataType: 'json',\n            contentType: false,\n            processData: false\n        })\n    }\n\n    return uRequest\n})","angular.module('ued').factory('uValidate', function () {\n    var uValidate = {}\n\n    /**\n     * 是否为空\n     * @param value\n     */\n    uValidate.isEmpty = function (value) {\n        return value == null || !String(value).trim()\n    }\n\n    /**\n     * 是否为手机号码\n     * @param value\n     */\n    uValidate.isPhoneNumber = function (value) {\n        return /^\\d{11}$/.test(value)\n    }\n\n    return uValidate\n})\n","angular.module('ued').factory('uWebApi', function (uRequest) {\n\tvar uWebApi = {}\n\n\tuWebApi.getUserInfo = function(data){\n\t\treturn uRequest.post('/campaign/htamhb/get-campaign-user-info',data);\n\t}\n\n\tuWebApi.doPersonalLottery = function(data){\n\t\treturn uRequest.post('/campaign/htamhb/lottery1',data);\n\t}\n\n\tuWebApi.doExclusiveLottery = function(data){\n\t\treturn uRequest.post('/campaign/htamhb/lottery2',data);\n\t}\n\n\treturn uWebApi\n})\n","angular.module('ued').factory('uWeixin', function (uRequest) {\n    var uWeixin = {}\n\n    /**\n     * 调试模式\n     * @type {Boolean}\n     */\n    uWeixin.debug = false\n\n    /**\n     * 初始化微信配置\n     * @param {Boolean} [isJSONP] 指定域名跨域请求,留空为同域请求\n     */\n    uWeixin.init = function (isJSONP) {\n        uWeixin.call('hideOptionMenu')\n\n        var def = $.Deferred()\n\n        var url = '/weixin/index/get-jsapi-ticket'\n        var req = null\n        if (isJSONP) {\n            req = uRequest.jsonp('http://weixinoauth.umaman.com/weixin/index/get-jssdk-info', {\n                url: window.location.href.split(\"#\")[0]\n            })\n        } else {\n            req = uRequest.get(url)\n        }\n        req.then(function (res) {\n\n            if (isJSONP) {\n                uWeixin.config(res.result)\n\n            } else {\n                var result = res.result\n                var appId = result.appid\n                var jsapi_ticket = result.jsapi_ticket\n                var timestamp = result.expire_time\n                var nonceStr = uWeixin.getNonceStr()\n                var url = window.location.href.split('#')[0]\n\n                var signature = window.hex_sha1(\n                    \"jsapi_ticket=\" + jsapi_ticket +\n                    \"&noncestr=\" + nonceStr +\n                    \"&timestamp=\" + timestamp +\n                    \"&url=\" + url\n                )\n\n                var options = {\n                    appId: appId,\n                    timestamp: timestamp,\n                    nonceStr: nonceStr,\n                    signature: signature\n                }\n                uWeixin.config(options)\n            }\n\n\n            def.resolve()\n\n        }, function () {\n            console.error('services/Weixin.init() error.')\n            def.reject()\n        })\n\n        return def.promise()\n    }\n\n    /**\n     * 执行配置\n     * @param {Object} options\n     */\n    uWeixin.config = function (options) {\n        options.debug = uWeixin.debug\n\n        options.jsApiList = [\n            'onMenuShareTimeline',\n            'onMenuShareAppMessage',\n            'onMenuShareQQ',\n            'onMenuShareWeibo',\n            'onMenuShareQZone',\n            'startRecord',\n            'stopRecord',\n            'onVoiceRecordEnd',\n            'playVoice',\n            'pauseVoice',\n            'stopVoice',\n            'onVoicePlayEnd',\n            'uploadVoice',\n            'downloadVoice',\n            'chooseImage',\n            'previewImage',\n            'uploadImage',\n            'downloadImage',\n            'translateVoice',\n            'getNetworkType',\n            'openLocation',\n            'getLocation',\n            'hideOptionMenu',\n            'showOptionMenu',\n            'hideMenuItems',\n            'showMenuItems',\n            'hideAllNonBaseMenuItem',\n            'showAllNonBaseMenuItem',\n            'closeWindow',\n            'scanQRCode'\n        ]\n\n        wx.config(options)\n    }\n\n    /**\n     * 老版API，调用微信JS接口\n     * @param method method 方法名\n     */\n    uWeixin.call = function (method) {\n        try {\n            function onBridgeReady() {\n                WeixinJSBridge.call(method);\n            }\n\n            if (typeof WeixinJSBridge == \"undefined\") {\n                if (document.addEventListener) {\n                    document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\n                } else if (document.attachEvent) {\n                    document.attachEvent('WeixinJSBridgeReady', onBridgeReady);\n                    document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\n                }\n            } else {\n                onBridgeReady();\n            }\n        } catch (e) {\n        }\n    }\n\n    /**\n     * 老版API，调用微信JS接口\n     * @param method 方法名\n     * @param data 参数\n     * @param fn 回调\n     */\n    uWeixin.invoke = function (method, data, fn) {\n        try {\n            function onBridgeReady() {\n                WeixinJSBridge.invoke(method, data, fn);\n            }\n\n            if (typeof WeixinJSBridge == \"undefined\") {\n                if (document.addEventListener) {\n                    document.addEventListener('WeixinJSBridgeReady', onBridgeReady, false);\n                } else if (document.attachEvent) {\n                    document.attachEvent('WeixinJSBridgeReady', onBridgeReady);\n                    document.attachEvent('onWeixinJSBridgeReady', onBridgeReady);\n                }\n            } else {\n                onBridgeReady();\n            }\n        } catch (e) {\n        }\n    }\n\n    /**\n     * 配置微信分享\n     *\n     * @param {Object} appMessage 分享给好友\n     *  title 分享标题\n     *  desc 分享内容\n     *  link 分享链接\n     *  imgUrl 分享图标\n     *  success 分享成功回调\n     *  cancel 取消分享回调\n     *\n     * @param {Object} [timeline] 分享到朋友圈,留空则使用appMessage的配置\n     *  title 分享标题\n     *  link 分享链接\n     *  imgUrl 分享图标\n     *  success 分享成功回调\n     *  cancel 取消分享回调\n     */\n    uWeixin.share = function (appMessage, timeline) {\n        wx.ready(function () {\n            wx.showOptionMenu()\n            wx.onMenuShareAppMessage(appMessage)\n            wx.onMenuShareTimeline(timeline || appMessage)\n        })\n    }\n\n    /**\n     * 获取nonceStr\n     * @returns {string}\n     */\n    uWeixin.getNonceStr = function () {\n        var chars = \"abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789\"\n        var str = \"\"\n        var length = 16\n        for (var i = 0; i < length; i++) {\n            str += chars.substr(Math.floor(Math.random() * (chars.length - 1)), 1)\n        }\n        return str\n    }\n\n    /**\n     * 获取微信共享收货地址\n     * @param data 参数\n     * @param callback 回调\n     if (res.err_msg == \"edit_address:ok\") {\n        province = res.proviceFirstStageName;//省\n        city = res.addressCitySecondStageName;//市\n        area = res.addressCountiesThirdStageName;//区\n        userName = res.userName;//收货人\n        zipcode = res.addressPostalCode;//邮编\n        address = res.addressDetailInfo;//地址\n        tel = res.telNumber;//手机或电话\n     }\n     */\n    uWeixin.editAddress = function (data, callback) {\n        uWeixin.invoke('editAddress', {\n            appId: data.appId,\n            scope: 'jsapi_address',\n            signType: 'sha1',\n            addrSign: data.addrSign,\n            timeStamp: data.timeStamp,\n            nonceStr: data.nonceStr\n        }, callback);\n    }\n\n    /**\n     * 发起微信支付\n     * @param data\n     * @param callback 回调\n     *\n     wx.chooseWXPay({\n        timestamp: 0, // 支付签名时间戳，注意微信jssdk中的所有使用timestamp字段均为小写。但最新版的支付后台生成签名使用的timeStamp字段名需大写其中的S字符\n        nonceStr: '', // 支付签名随机串，不长于 32 位\n        package: '', // 统一支付接口返回的prepay_id参数值，提交格式如：prepay_id=***）\n        signType: '', // 签名方式，默认为'SHA1'，使用新版支付需传入'MD5'\n        paySign: '', // 支付签名\n        success: function (res) {\n            // 支付成功后的回调函数\n        }\n    });\n     */\n\n    uWeixin.chooseWXpay = function (data, callback) {\n        if (uRequest.isLocal()) {\n            typeof callback === 'function' && callback({\n                err_msg: 'get_brand_wcpay_request:ok'\n            });\n            return;\n        }\n\n        data.timestamp = data.timestamp || data.timeStamp;\n\n        uWeixin.invoke('getBrandWCPayRequest', data, function (res) {\n            typeof callback === 'function' && callback(res);\n        });\n    }\n\n    return uWeixin\n})\n"]}